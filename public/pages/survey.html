<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>신한라이프 잡세미나 - 사전 설문조사</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../styles.css" />
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: "Noto Sans KR", sans-serif;
        line-height: 1.6;
        color: #333;
        background-color: #f8f9fb;
      }

      header {
        background-color: #0b4da2;
        padding: 20px 0;
        color: white;
      }

      .container {
        width: 90%;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 15px;
      }

      .logo {
        font-size: 1.5rem;
        font-weight: 700;
      }

      .survey-container {
        max-width: 800px;
        margin: 40px auto;
        background: white;
        border-radius: 12px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        padding: 40px;
      }

      .survey-title {
        font-size: 24px;
        font-weight: 700;
        margin-bottom: 10px;
        color: #0b4da2;
        text-align: center;
      }

      .survey-description {
        margin-bottom: 30px;
        text-align: center;
        color: #555;
      }

      .survey-form {
        margin-top: 30px;
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 500;
        color: #333;
      }

      .form-control {
        width: 100%;
        padding: 12px 15px;
        border: 1px solid #ddd;
        border-radius: 6px;
        font-size: 16px;
        transition: border-color 0.3s;
      }

      .form-control:focus {
        border-color: #0b4da2;
        outline: none;
      }

      .question-section {
        margin-bottom: 30px;
        border: 1px solid #eee;
        border-radius: 8px;
        padding: 20px;
        background-color: #f9f9f9;
      }

      .question-title {
        font-weight: 600;
        margin-bottom: 15px;
        color: #333;
      }

      .question-required::after {
        content: " *";
        color: #e74c3c;
      }

      .question-options {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .question-options label {
        display: flex;
        align-items: center;
        cursor: pointer;
        padding: 10px;
        border-radius: 6px;
        transition: background-color 0.2s;
      }

      .question-options label:hover {
        background-color: #f0f4fa;
      }

      .question-options input[type="radio"] {
        margin-right: 10px;
        accent-color: #0b4da2;
      }

      textarea.form-control {
        min-height: 120px;
        resize: vertical;
      }

      .submit-section {
        margin-top: 30px;
        text-align: center;
      }

      .btn-submit {
        background-color: #ff5a5f;
        color: white;
        border: none;
        padding: 16px 50px;
        font-size: 18px;
        font-weight: 700;
        border-radius: 30px;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        letter-spacing: 1px;
      }

      .btn-submit:hover {
        background-color: #ff3a3f;
        transform: translateY(-3px);
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
      }

      .notice-box {
        background-color: #f0f4fa;
        border-left: 4px solid #0b4da2;
        padding: 20px;
        margin: 30px 0;
        border-radius: 6px;
      }

      .notice-box h3 {
        color: #0b4da2;
        margin-bottom: 10px;
      }

      .notice-box p {
        margin-bottom: 10px;
        color: #333;
      }

      footer {
        background-color: #333;
        color: white;
        padding: 40px 0;
        margin-top: 60px;
      }

      .footer-content {
        display: flex;
        justify-content: space-between;
        margin-bottom: 30px;
      }

      .footer-logo {
        font-size: 1.5rem;
        font-weight: 700;
        margin-bottom: 15px;
        color: white;
      }

      .footer-info p {
        margin-bottom: 8px;
        color: rgba(255, 255, 255, 0.8);
      }

      .divider {
        height: 1px;
        background-color: rgba(255, 255, 255, 0.2);
        margin: 20px 0;
      }

      /* 성공 메시지 스타일 개선 */
      .success-message {
        background-color: #e8f5e9;
        border: 1px solid #a5d6a7;
        border-radius: 8px;
        padding: 30px;
        text-align: center;
        margin: 30px 0;
        color: #2e7d32;
      }

      .success-message h3 {
        font-size: 24px;
        margin-bottom: 20px;
        color: #2e7d32;
      }

      .success-message p {
        margin-bottom: 15px;
        color: #333;
        font-size: 16px;
      }

      /* 반응형 디자인 */
      @media (max-width: 768px) {
        .survey-container {
          padding: 20px;
        }

        .question-section {
          padding: 15px;
        }

        .btn-submit {
          width: 100%;
        }

        .footer-content {
          flex-direction: column;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <div class="container">
        <div class="logo">신한라이프</div>
      </div>
    </header>

    <div class="container">
      <div class="survey-container">
        <h1 class="survey-title">신한라이프 잡세미나 사전 설문지</h1>
        <p class="survey-description">
          안녕하세요, 신한라이프입니다.<br />
          세미나 참석 확정을 위해 아래 문항에 성실하게 응답해주시기 바랍니다.<br />
          작성하신 내용은 내부 검토 후, 참석 여부를 개별적으로 안내드릴
          예정입니다.
        </p>

        <form id="survey-form" class="survey-form">
          <div class="form-group">
            <label for="participant-email">이메일</label>
            <input
              type="email"
              id="participant-email"
              class="form-control"
              readonly
            />
          </div>

          <div class="form-group">
            <label for="participant-name">이름</label>
            <input
              type="text"
              id="participant-name"
              class="form-control"
              readonly
            />
          </div>

          <div class="question-section">
            <div class="question-title question-required">
              [질문 1] 아래 보기 중, 본인의 성향과 가장 가까운 항목을 선택해
              주세요.
            </div>
            <div class="question-options">
              <label>
                <input
                  type="radio"
                  name="question1"
                  value="낯선 환경에서도 빠르게 적응하고 타인과 소통하는 편입니다."
                  required
                />
                낯선 환경에서도 빠르게 적응하고 타인과 소통하는 편입니다.
              </label>
              <label>
                <input
                  type="radio"
                  name="question1"
                  value="새로운 도전보다는 익숙하고 안정적인 루틴을 선호합니다."
                />
                새로운 도전보다는 익숙하고 안정적인 루틴을 선호합니다.
              </label>
              <label>
                <input
                  type="radio"
                  name="question1"
                  value="결과보다는 과정을 중시하며, 천천히 익히는 스타일입니다."
                />
                결과보다는 과정을 중시하며, 천천히 익히는 스타일입니다.
              </label>
            </div>
          </div>

          <div class="question-section">
            <div class="question-title question-required">
              [질문 2] 본 세미나는 비즈니스 캐주얼 복장 및 성실한 청강 태도를
              전제로 운영됩니다. 복장 및 태도 기준은 브랜드 이미지와 연결되며,
              모든 참석자에게 동일하게 적용됩니다. 이 운영 기준에 동의하십니까?
            </div>
            <div class="question-options">
              <label>
                <input
                  type="radio"
                  name="question2"
                  value="네, 숙지하였으며 정중히 참석하겠습니다."
                  required
                />
                네, 숙지하였으며 정중히 참석하겠습니다.
              </label>
              <label>
                <input type="radio" name="question2" value="아니오" />
                아니오
              </label>
            </div>
          </div>

          <div class="question-section">
            <div class="question-title question-required">
              [질문 3] 최근에 어떤 활동 또는 직무를 하셨는지 소개해 주세요.
              또한, 새로운 기회를 선택할 때 본인이 가장 중요하게 생각하는 기준은
              무엇인지 알려주세요.
            </div>
            <textarea class="form-control" name="question3" required></textarea>
          </div>

          <div class="question-section">
            <div class="question-title question-required">
              [질문 4] 세미나에 3시간 이상 성실히 참여하고, 사후 피드백 설문에
              응답하신 분께는 취업 독려금 7만 원이 제공됩니다. ※ 보상은 매월
              25일 일괄 지급되며, 익월 참석 시 다음 달 25일 지급됩니다. 해당
              조건에 동의하십니까?
            </div>
            <div class="question-options">
              <label>
                <input type="radio" name="question4" value="예" required />
                예
              </label>
              <label>
                <input type="radio" name="question4" value="아니오" />
                아니오
              </label>
            </div>
          </div>

          <div class="question-section">
            <div class="question-title question-required">
              [질문 5] 아래 항목을 모두 확인하고, 해당하는 항목에 체크해 주세요.
            </div>

            <div style="margin-bottom: 20px">
              <div style="margin-bottom: 10px; font-weight: 500">
                ① 귀하의 최종 학력은 어떻게 되시나요?
              </div>
              <div class="question-options">
                <label>
                  <input
                    type="radio"
                    name="education"
                    value="중학교 졸업"
                    required
                  />
                  중학교 졸업
                </label>
                <label>
                  <input type="radio" name="education" value="고등학교 졸업" />
                  고등학교 졸업
                </label>
                <label>
                  <input type="radio" name="education" value="전문대 졸업" />
                  전문대 졸업
                </label>
                <label>
                  <input
                    type="radio"
                    name="education"
                    value="4년제 대학교 졸업"
                  />
                  4년제 대학교 졸업
                </label>
                <label>
                  <input type="radio" name="education" value="대학원 이상" />
                  대학원 이상
                </label>
                <label>
                  <input
                    type="radio"
                    name="education"
                    value="해당 없음 / 미응답"
                  />
                  해당 없음 / 미응답
                </label>
              </div>
            </div>

            <div>
              <div style="margin-bottom: 10px; font-weight: 500">
                ② 귀하의 KCB 신용점수는 다음 중 어디에 해당되나요?
              </div>
              <div class="question-options">
                <label>
                  <input
                    type="radio"
                    name="credit_score"
                    value="950점 이상"
                    required
                  />
                  950점 이상
                </label>
                <label>
                  <input type="radio" name="credit_score" value="850 ~ 949점" />
                  850 ~ 949점
                </label>
                <label>
                  <input type="radio" name="credit_score" value="750 ~ 849점" />
                  750 ~ 849점
                </label>
                <label>
                  <input type="radio" name="credit_score" value="650 ~ 749점" />
                  650 ~ 749점
                </label>
                <label>
                  <input type="radio" name="credit_score" value="550 ~ 649점" />
                  550 ~ 649점
                </label>
                <label>
                  <input
                    type="radio"
                    name="credit_score"
                    value="549점 이하 또는 확인 불가"
                  />
                  549점 이하 또는 확인 불가
                </label>
              </div>
            </div>
          </div>

          <div class="question-section">
            <div class="question-title question-required">
              [질문 6] 세미나 참석이 확정되신 분께는 인적성 검사 링크가 이메일로
              개별 발송됩니다. 사전 검사는 세미나 당일, 본인 검사 결과를
              바탕으로 한 피드백 시간에 필수로 사용되며, 검사 미완료 시 참석이
              제한될 수 있습니다. 이 내용을 숙지하고 동의하십니까?
            </div>
            <div class="question-options">
              <label>
                <input
                  type="radio"
                  name="question6"
                  value="네, 사전 검사를 성실히 완료하겠습니다."
                  required
                />
                네, 사전 검사를 성실히 완료하겠습니다.
              </label>
              <label>
                <input type="radio" name="question6" value="아니오" />
                아니오
              </label>
            </div>
          </div>

          <div class="question-section">
            <div class="question-title question-required">
              [질문 7] 이번 세미나에 지원하신 이유는 무엇인가요?
            </div>
            <div class="question-options">
              <label>
                <input
                  type="radio"
                  name="question7"
                  value="새로운 진로 또는 커리어 기회를 탐색 중입니다."
                  required
                />
                새로운 진로 또는 커리어 기회를 탐색 중입니다.
              </label>
              <label>
                <input
                  type="radio"
                  name="question7"
                  value="보험/영업 분야에 관심이 있어 실제 담당자의 이야기를 듣고 싶습니다."
                />
                보험/영업 분야에 관심이 있어 실제 담당자의 이야기를 듣고
                싶습니다.
              </label>
              <label>
                <input
                  type="radio"
                  name="question7"
                  value="단순 청강 또는 일반적인 경험 차원에서 참석하고 싶습니다."
                />
                단순 청강 또는 일반적인 경험 차원에서 참석하고 싶습니다.
              </label>
            </div>
          </div>

          <div class="question-section">
            <div class="question-title">
              [질문 8] (선택 응답) 이번 세미나에서 기대하는 점이나 미리 알고
              싶은 내용이 있다면 자유롭게 작성해 주세요.
            </div>
            <textarea class="form-control" name="question8"></textarea>
          </div>

          <div class="notice-box">
            <h3 style="margin-top: 0">📬 안내사항</h3>
            <p>
              해당 설문은 세미나 참석자 선별을 위한 사전 절차이며, 검토를
              통과하신 분에 한해 인적성 검사 링크가 이메일로 개별 발송됩니다.
            </p>
            <p>
              반드시 사전 검사를 완료하셔야 세미나 당일 참석이 가능하며, 당일
              현장에서는 검사 결과를 기반으로 한 1:1 피드백 세션이 진행됩니다.
            </p>
          </div>

          <div class="submit-section">
            <button type="submit" class="btn-submit">설문 제출하기</button>
          </div>
        </form>
      </div>
    </div>

    <footer>
      <div class="container">
        <div class="footer-content">
          <div>
            <div class="footer-logo">신한라이프</div>
            <div class="footer-info">
              <p>이메일: ingchief@daum.net</p>
              <p>담당자 전화: 010-3038-7011</p>
              <p>주소: 서울특별시 강남구 신한L 강남타워</p>
            </div>
          </div>
        </div>
        <div class="divider"></div>
        <p style="text-align: center; color: rgba(255, 255, 255, 0.8)">
          © 2025 Shinhan Life. All rights reserved.
        </p>
      </div>
    </footer>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script>
      // Firebase 초기화
      const firebaseConfig = {
        apiKey: "AIzaSyCchKTpa3JrdJZlRupMq-XwBeQgdzS4MUs",
        authDomain: "sh-landing-74407.firebaseapp.com",
        projectId: "sh-landing-74407",
        storageBucket: "sh-landing-74407.appspot.com",
        messagingSenderId: "299032160126",
        appId: "1:299032160126:web:e6f0d89aa6a7f7e9d18975",
      };

      // Firebase 앱 초기화
      firebase.initializeApp(firebaseConfig);

      // Firestore 초기화
      const db = firebase.firestore();

      // 명시적으로 타임스탬프 설정
      db.settings({
        timestampsInSnapshots: true,
      });

      document.addEventListener("DOMContentLoaded", function () {
        // URL 파라미터에서 이메일과 이름 가져오기
        const urlParams = new URLSearchParams(window.location.search);
        const email = urlParams.get("email");
        const name = urlParams.get("name");

        if (email && name) {
          // 폼에 이메일과 이름 설정
          document.getElementById("participant-email").value = email;
          document.getElementById("participant-name").value = name;

          // 페이지 상단에 이름 표시
          document.querySelector(
            ".survey-description"
          ).innerHTML += `<br><strong>${name}</strong>님, 설문에 응답해 주셔서 감사합니다.`;
        } else {
          // 파라미터가 없으면 메인 페이지로 리디렉션
          alert("잘못된 접근입니다. 메인 페이지로 이동합니다.");
          window.location.href = "../index.html";
        }

        // 폼 제출 이벤트 처리
        const surveyForm = document.getElementById("survey-form");
        surveyForm.addEventListener("submit", function (e) {
          e.preventDefault();

          // 폼 데이터 수집
          const formData = {
            email: document.getElementById("participant-email").value,
            name: document.getElementById("participant-name").value,
            question1: document.querySelector('input[name="question1"]:checked')
              .value,
            question2: document.querySelector('input[name="question2"]:checked')
              .value,
            question3: document.querySelector('textarea[name="question3"]')
              .value,
            question4: document.querySelector('input[name="question4"]:checked')
              .value,
            education: document.querySelector('input[name="education"]:checked')
              .value,
            credit_score: document.querySelector(
              'input[name="credit_score"]:checked'
            ).value,
            question6: document.querySelector('input[name="question6"]:checked')
              .value,
            question7: document.querySelector('input[name="question7"]:checked')
              .value,
            question8:
              document.querySelector('textarea[name="question8"]').value || "",
            submitted_at: firebase.firestore.FieldValue.serverTimestamp(),
          };

          // Firestore에 저장
          db.collection("survey_responses")
            .add(formData)
            .then(function (docRef) {
              console.log("설문 응답 저장 성공:", docRef.id);

              // 성공 메시지 표시
              surveyForm.innerHTML = `
                <div class="success-message">
                  <h3>설문 제출이 완료되었습니다!</h3>
                  <p>${formData.name}님, 설문에 응답해 주셔서 감사합니다.</p>
                  <p>설문 결과는 내부 검토 후, 참석 여부를 개별적으로 안내드릴 예정입니다.</p>
                  <p>추가 문의사항은 이메일(ingchief@daum.net)로 연락 주시기 바랍니다.</p>
                </div>
              `;

              // 설문 상태 업데이트
              db.collection("registrations")
                .where("email", "==", formData.email)
                .get()
                .then(function (querySnapshot) {
                  querySnapshot.forEach(function (doc) {
                    db.collection("registrations").doc(doc.id).update({
                      survey_completed: true,
                      survey_completed_at:
                        firebase.firestore.FieldValue.serverTimestamp(),
                    });
                  });
                });
            })
            .catch(function (error) {
              console.error("설문 응답 저장 실패:", error);
              alert("설문 제출 중 오류가 발생했습니다: " + error.message);
            });
        });
      });
    </script>
  </body>
</html>
